#+TITLE: Fish config
#+AUTHOR: Kuhy
#+OPTIONS: prop:t

#+INCLUDE: "../variables.org"

* General
:PROPERTIES:
:header-args: :tangle ~/.config/fish/config.fish :comments both :mkdirp yes :noweb tangle
:END:
Use vim key bindings.
#+BEGIN_SRC sh
fish_vi_key_bindings
#+END_SRC

Bootstrap fisher installation
#+BEGIN_SRC sh
if not functions -q fisher
    set -q XDG_CONFIG_HOME; or set XDG_CONFIG_HOME ~/.config
    curl https://git.io/fisher --create-dirs -sLo $XDG_CONFIG_HOME/fish/functions/fisher.fish
    fish -c fisher
end
#+END_SRC

add ~/bin to path
#+BEGIN_SRC sh
set PATH ~/bin $PATH
#+END_SRC

make abbrevations private to a particular fish session
#+BEGIN_SRC sh
set -g fish_user_abbreviations
#+END_SRC

set aliases
#+BEGIN_SRC sh
alias ssh 'env TERM=xterm ssh'
#+END_SRC

set abbrevations
#+BEGIN_SRC sh
abbr c 'clear'

abbr .1 'cd ..'
abbr .2 'cd ../..'
abbr .3 'cd ../../..'
abbr .4 'cd ../../../..'
abbr .5 'cd ../../../../..'

abbr v 'vim'

abbr :q 'exit'

abbr g 'git'
abbr gs 'git status'
abbr gl 'git log'
abbr ga 'git add'
abbr gc 'git commit'
abbr gd 'git difftool'

abbr dnf 'sudo dnf'
abbr mount 'sudo mount'
abbr umount 'sudo umount'
#+END_SRC

* Functions
** Editor
:PROPERTIES:
:header-args: :tangle ~/.config/fish/functions/e.fish :comments both :mkdirp yes :noweb tangle
:END:
Start and detach =$EDITOR= from shell.
#+BEGIN_SRC sh
function e
    bash -c "eval $VISUAL $argv" >/dev/null &; disown
end
#+END_SRC

** Cheat.sh
:PROPERTIES:
:header-args: :tangle ~/.config/fish/functions/cht.fish :comments both :mkdirp yes :noweb tangle
:END:
#+BEGIN_SRC sh
function cht
  set param (echo $argv | \
        sed -E 's/ /\//;s/ ([0-9]+)$/\/\1/;s/ /+/g')
  curl -Ls "cht.sh/$param" | less -R
end
#+END_SRC

* Fisher
:PROPERTIES:
:header-args: :tangle ~/.config/fish/fishfile :comments no :mkdirp yes :noweb tangle
:END:
Fisher is fish package manager.

** Pure
Minimal prompt for fish.
#+BEGIN_SRC conf
rafaelrinaldi/pure
#+END_SRC

** Done
Automatically receive notifications when long processes finish.
#+BEGIN_SRC conf
franciscolourenco/done
#+END_SRC

** Pisces
helps you to work with paired symbols in the command line
#+BEGIN_SRC conf
laughedelic/pisces
#+END_SRC
